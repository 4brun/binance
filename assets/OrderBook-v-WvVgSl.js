import{T as b,U as v,p as x,m as L,b as P,g as O,e as h,W as A,v as K,X as q,G as F,H as J,z,o as H,k as Q,w as r,i as u,l as p,K as y,n as d,J as f}from"./index-BrT1GpTm.js";import{u as X,V as C,a as V}from"./VSheet-B-8x1l5g.js";import{f as w,a as Y}from"./VList-d3y7Xq_G.js";import"./index-Cphs9BBb.js";import"./VBtn-BXKPAewv.js";const B=b.reduce((e,a)=>(e[a]={type:[Boolean,String,Number],default:!1},e),{}),E=b.reduce((e,a)=>{const t="offset"+v(a);return e[t]={type:[String,Number],default:null},e},{}),T=b.reduce((e,a)=>{const t="order"+v(a);return e[t]={type:[String,Number],default:null},e},{}),N={col:Object.keys(B),offset:Object.keys(E),order:Object.keys(T)};function Z(e,a,t){let s=e;if(!(t==null||t===!1)){if(a){const n=a.replace(e,"");s+=`-${n}`}return e==="col"&&(s="v-"+s),e==="col"&&(t===""||t===!0)||(s+=`-${t}`),s.toLowerCase()}}const ee=["auto","start","end","center","baseline","stretch"],te=x({cols:{type:[Boolean,String,Number],default:!1},...B,offset:{type:[String,Number],default:null},...E,order:{type:[String,Number],default:null},...T,alignSelf:{type:String,default:null,validator:e=>ee.includes(e)},...L(),...P()},"VCol"),$=O()({name:"VCol",props:te(),setup(e,a){let{slots:t}=a;const s=h(()=>{const n=[];let i;for(i in N)N[i].forEach(c=>{const g=e[c],l=Z(i,c,g);l&&n.push(l)});const m=n.some(c=>c.startsWith("v-col-"));return n.push({"v-col":!m||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),n});return()=>{var n;return A(e.tag,{class:[s.value,e.class],style:e.style},(n=t.default)==null?void 0:n.call(t))}}}),S=["start","end","center"],G=["space-between","space-around","space-evenly"];function k(e,a){return b.reduce((t,s)=>{const n=e+v(s);return t[n]=a(),t},{})}const ae=[...S,"baseline","stretch"],U=e=>ae.includes(e),I=k("align",()=>({type:String,default:null,validator:U})),ne=[...S,...G],W=e=>ne.includes(e),M=k("justify",()=>({type:String,default:null,validator:W})),se=[...S,...G,"stretch"],R=e=>se.includes(e),D=k("alignContent",()=>({type:String,default:null,validator:R})),j={align:Object.keys(I),justify:Object.keys(M),alignContent:Object.keys(D)},oe={align:"align",justify:"justify",alignContent:"align-content"};function le(e,a,t){let s=oe[e];if(t!=null){if(a){const n=a.replace(e,"");s+=`-${n}`}return s+=`-${t}`,s.toLowerCase()}}const re=x({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:U},...I,justify:{type:String,default:null,validator:W},...M,alignContent:{type:String,default:null,validator:R},...D,...L(),...P()},"VRow"),ie=O()({name:"VRow",props:re(),setup(e,a){let{slots:t}=a;const s=h(()=>{const n=[];let i;for(i in j)j[i].forEach(m=>{const c=e[m],g=le(i,m,c);g&&n.push(g)});return n.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),n});return()=>{var n;return A(e.tag,{class:["v-row",s.value,e.class],style:e.style},(n=t.default)==null?void 0:n.call(t))}}});function ce(e,a){return a?e:{}}function ue(e,a){const t=K();return t.value=new WebSocket(`wss://stream.binance.com:9443/ws/${e}@depth`),t.value.onmessage=s=>{const n=JSON.parse(s.data);a(n)},q(()=>{console.warn("[WebSocket] Closed"),t.value.close()}),{socket:t}}const de={class:"text-h6 px-2"},fe={class:"text-disabled"},me={class:"text-h6 px-2"},ge={class:"text-disabled"},Se=F({__name:"OrderBook",setup(e){const{mobile:a}=J(),t=X(),s=h(()=>t.currentSymbol.toLowerCase()),n=h(()=>{var l;return g((l=t.orderBook)==null?void 0:l.bids)}),i=h(()=>{var l;return g((l=t.orderBook)==null?void 0:l.asks)}),m=h(()=>[{title:"Price",value:"price"},{title:"Quantity",value:"quantity"},ce({title:"Total",value:"total"},!a.value)]),c=[{value:100,title:"100"},{value:500,title:"500"},{value:1e3,title:"1000"}];function g(l){if(l)return[...l].map(([_,o])=>[_,o])}return z(()=>{const{socket:l}=ue(s.value,t.processEvent);l.value.onopen=async()=>{console.warn("[WebSocket] Open"),await t.getSnapshot()}}),(l,_)=>(H(),Q(Y,null,{default:r(()=>[u(ie,{"no-gutters":""},{default:r(()=>[u($,{cols:"12",md:"6"},{default:r(()=>[u(C,{class:"ma-1 pa-1",rounded:""},{default:r(()=>[p("span",de,[y("Bids "),p("small",fe," ("+d(f(t).currentSymbol)+") ",1)]),u(w),u(V,{headers:m.value,"fixed-header":"","fixed-footer":"",loading:f(t).loader,height:`calc(${f(a)?50:100}vh - ${f(a)?14:16}rem)`,density:"compact",items:n.value,"items-per-page":"100","items-per-page-options":c},{"item.price":r(({item:o})=>[y(d(o[0]),1)]),"item.quantity":r(({item:o})=>[y(d(o[1]),1)]),"item.total":r(({item:o})=>[p("strong",null,d(o[0]*o[1]),1)]),_:1},8,["headers","loading","height","items"])]),_:1})]),_:1}),u($,{cols:"12",md:"6"},{default:r(()=>[u(C,{class:"ma-1 pa-1",rounded:""},{default:r(()=>[p("span",me,[y("Asks "),p("small",ge," ("+d(f(t).currentSymbol)+") ",1)]),u(w),u(V,{headers:m.value,"fixed-header":"","fixed-footer":"",loading:f(t).loader,height:`calc(${f(a)?50:100}vh - ${f(a)?14:16}rem)`,density:"compact",items:i.value,"items-per-page":"100","items-per-page-options":c},{"item.price":r(({item:o})=>[y(d(o[0]),1)]),"item.quantity":r(({item:o})=>[y(d(o[1]),1)]),"item.total":r(({item:o})=>[y(d(o[0]*o[1]),1)]),_:1},8,["headers","loading","height","items"])]),_:1})]),_:1})]),_:1})]),_:1}))}});export{Se as default};
